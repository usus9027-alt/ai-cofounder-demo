<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Co-founder Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/fabric@5.3.0/dist/fabric.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .canvas-container {
            background: #f8fafc;
            border: 2px dashed #cbd5e1;
        }
        .phase-active {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }
        .object-problem { background: #fef2f2; border-color: #fca5a5; }
        .object-insight { background: #eff6ff; border-color: #93c5fd; }
        .object-persona { background: #f0fdf4; border-color: #86efac; }
        .object-solution { background: #faf5ff; border-color: #c4b5fd; }
        .object-milestone { background: #fffbeb; border-color: #fcd34d; }
        .object-note { background: #f9fafb; border-color: #d1d5db; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-robot text-3xl"></i>
                    <h1 class="text-2xl font-bold">AI Co-founder Platform</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="exportBtn" class="bg-white text-blue-600 px-4 py-2 rounded-lg hover:bg-gray-100 transition">
                        <i class="fas fa-download mr-2"></i>–≠–∫—Å–ø–æ—Ä—Ç
                    </button>
                    <button id="saveBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                        <i class="fas fa-save mr-2"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Phase Navigation -->
    <nav class="bg-white shadow-sm border-b">
        <div class="container mx-auto px-4">
            <div class="flex space-x-1 py-4 overflow-x-auto">
                <button class="phase-btn phase-active px-4 py-2 rounded-lg whitespace-nowrap" data-phase="1">
                    <i class="fas fa-lightbulb mr-2"></i>1. –ü—Ä–æ–±–ª–µ–º–∞ & –ò–¥–µ—è
                </button>
                <button class="phase-btn px-4 py-2 rounded-lg whitespace-nowrap hover:bg-gray-100" data-phase="2">
                    <i class="fas fa-chart-line mr-2"></i>2. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—ã–Ω–∫–∞
                </button>
                <button class="phase-btn px-4 py-2 rounded-lg whitespace-nowrap hover:bg-gray-100" data-phase="3">
                    <i class="fas fa-user mr-2"></i>3. –ü–µ—Ä—Å–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                </button>
                <button class="phase-btn px-4 py-2 rounded-lg whitespace-nowrap hover:bg-gray-100" data-phase="4">
                    <i class="fas fa-cube mr-2"></i>4. –†–µ—à–µ–Ω–∏–µ & MVP
                </button>
                <button class="phase-btn px-4 py-2 rounded-lg whitespace-nowrap hover:bg-gray-100" data-phase="5">
                    <i class="fas fa-hammer mr-2"></i>5. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
                </button>
                <button class="phase-btn px-4 py-2 rounded-lg whitespace-nowrap hover:bg-gray-100" data-phase="6">
                    <i class="fas fa-bullhorn mr-2"></i>6. –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–π –ø–ª–∞–Ω
                </button>
                <button class="phase-btn px-4 py-2 rounded-lg whitespace-nowrap hover:bg-gray-100" data-phase="7">
                    <i class="fas fa-rocket mr-2"></i>7. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ø—É—Å–∫—É
                </button>
                <button class="phase-btn px-4 py-2 rounded-lg whitespace-nowrap hover:bg-gray-100" data-phase="8">
                    <i class="fas fa-flag-checkered mr-2"></i>8. –ó–∞–ø—É—Å–∫
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-6">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 h-screen">
            <!-- Chat Panel -->
            <div class="lg:col-span-1 bg-white rounded-lg shadow-sm border">
                <div class="p-4 border-b">
                    <h3 class="text-lg font-semibold flex items-center">
                        <i class="fas fa-comments mr-2 text-blue-600"></i>
                        AI –ß–∞—Ç
                    </h3>
                </div>
                <div class="flex flex-col h-full">
                    <div id="chatMessages" class="flex-1 p-4 overflow-y-auto space-y-4">
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <div class="flex items-start space-x-2">
                                <i class="fas fa-robot text-blue-600 mt-1"></i>
                                <div>
                                    <p class="text-sm text-gray-700">–ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ–π AI-–∫–æ—Ñ–∞—É–Ω–¥–µ—Ä. –†–∞—Å—Å–∫–∞–∂–∏ –º–Ω–µ –æ —Å–≤–æ–µ–π –∏–¥–µ–µ, –∏ —è –ø–æ–º–æ–≥—É —Ç–µ–±–µ –ø—Ä–æ–π—Ç–∏ –ø—É—Ç—å –æ—Ç –∏–¥–µ–∏ –¥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="p-4 border-t">
                        <div class="flex space-x-2">
                            <input type="text" id="chatInput" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –∏–¥–µ—é..." 
                                   class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <button id="sendBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <div class="mt-2 flex space-x-2">
                            <button id="analyzeMarketBtn" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition">
                                <i class="fas fa-chart-line mr-1"></i>–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞
                            </button>
                            <button id="generateIdeasBtn" class="bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700 transition">
                                <i class="fas fa-lightbulb mr-1"></i>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–¥–µ–π
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Canvas Panel -->
            <div class="lg:col-span-2 bg-white rounded-lg shadow-sm border">
                <div class="p-4 border-b">
                    <h3 class="text-lg font-semibold flex items-center">
                        <i class="fas fa-palette mr-2 text-green-600"></i>
                        Canvas –î–æ—Å–∫–∞
                    </h3>
                </div>
                <div class="p-4">
                    <div id="canvasContainer" class="canvas-container w-full h-96 rounded-lg relative">
                        <canvas id="canvas" width="800" height="400"></canvas>
                    </div>
                </div>
            </div>

            <!-- Tools Panel -->
            <div class="lg:col-span-1 bg-white rounded-lg shadow-sm border">
                <div class="p-4 border-b">
                    <h3 class="text-lg font-semibold flex items-center">
                        <i class="fas fa-tools mr-2 text-purple-600"></i>
                        –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
                    </h3>
                </div>
                <div class="p-4 space-y-4">
                    <!-- Object Types -->
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">–¢–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤</h4>
                        <div class="grid grid-cols-2 gap-2">
                            <button class="object-type-btn object-problem p-2 rounded border text-xs" data-type="problem">
                                <i class="fas fa-exclamation-triangle text-red-500"></i><br>–ü—Ä–æ–±–ª–µ–º–∞
                            </button>
                            <button class="object-type-btn object-insight p-2 rounded border text-xs" data-type="insight">
                                <i class="fas fa-lightbulb text-blue-500"></i><br>–ò–Ω—Å–∞–π—Ç
                            </button>
                            <button class="object-type-btn object-persona p-2 rounded border text-xs" data-type="persona">
                                <i class="fas fa-user text-green-500"></i><br>–ü–µ—Ä—Å–æ–Ω–∞
                            </button>
                            <button class="object-type-btn object-solution p-2 rounded border text-xs" data-type="solution">
                                <i class="fas fa-cube text-purple-500"></i><br>–†–µ—à–µ–Ω–∏–µ
                            </button>
                            <button class="object-type-btn object-milestone p-2 rounded border text-xs" data-type="milestone">
                                <i class="fas fa-flag text-yellow-500"></i><br>–≠—Ç–∞–ø
                            </button>
                            <button class="object-type-btn object-note p-2 rounded border text-xs" data-type="note">
                                <i class="fas fa-sticky-note text-gray-500"></i><br>–ó–∞–º–µ—Ç–∫–∞
                            </button>
                        </div>
                    </div>

                    <!-- Canvas Tools -->
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Canvas</h4>
                        <div class="space-y-2">
                            <button id="selectTool" class="w-full bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm">
                                <i class="fas fa-mouse-pointer mr-2"></i>–í—ã–±–æ—Ä
                            </button>
                            <button id="panTool" class="w-full bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm">
                                <i class="fas fa-hand-paper mr-2"></i>–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
                            </button>
                            <button id="zoomIn" class="w-full bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm">
                                <i class="fas fa-search-plus mr-2"></i>–£–≤–µ–ª–∏—á–∏—Ç—å
                            </button>
                            <button id="zoomOut" class="w-full bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm">
                                <i class="fas fa-search-minus mr-2"></i>–£–º–µ–Ω—å—à–∏—Ç—å
                            </button>
                            <button id="clearCanvas" class="w-full bg-red-100 hover:bg-red-200 text-red-700 p-2 rounded text-sm">
                                <i class="fas fa-trash mr-2"></i>–û—á–∏—Å—Ç–∏—Ç—å
                            </button>
                        </div>
                    </div>

                    <!-- Market Analysis -->
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞</h4>
                        <div class="space-y-2">
                            <button id="twitterAnalysis" class="w-full bg-blue-100 hover:bg-blue-200 text-blue-700 p-2 rounded text-sm">
                                <i class="fab fa-twitter mr-2"></i>Twitter –∞–Ω–∞–ª–∏–∑
                            </button>
                            <button id="competitorAnalysis" class="w-full bg-green-100 hover:bg-green-200 text-green-700 p-2 rounded text-sm">
                                <i class="fas fa-chart-bar mr-2"></i>–ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <div class="flex items-center space-x-3">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                <span class="text-lg">AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç...</span>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Canvas
        const canvas = new fabric.Canvas('canvas');
        let currentPhase = 1;
        let selectedObjectType = 'note';

        // –§–∞–∑—ã –ø—Ä–æ–µ–∫—Ç–∞
        const phases = {
            1: { name: '–ü—Ä–æ–±–ª–µ–º–∞ & –ò–¥–µ—è', description: '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏–¥–µ–∏' },
            2: { name: '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—ã–Ω–∫–∞', description: '–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤' },
            3: { name: '–ü–µ—Ä—Å–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', description: '–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ä—Ç—Ä–µ—Ç–∞ —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏' },
            4: { name: '–†–µ—à–µ–Ω–∏–µ & MVP', description: '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—à–µ–Ω–∏—è –∏ MVP' },
            5: { name: '–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞', description: '–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞' },
            6: { name: '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–π –ø–ª–∞–Ω', description: '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏' },
            7: { name: '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ø—É—Å–∫—É', description: '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ø—É—Å–∫—É' },
            8: { name: '–ó–∞–ø—É—Å–∫', description: '–ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–∞' }
        };

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ñ–∞–∑–∞–º
        document.querySelectorAll('.phase-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.phase-btn').forEach(b => b.classList.remove('phase-active'));
                btn.classList.add('phase-active');
                currentPhase = parseInt(btn.dataset.phase);
                updatePhaseInfo();
            });
        });

        function updatePhaseInfo() {
            const phase = phases[currentPhase];
            console.log(`–¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞: ${phase.name} - ${phase.description}`);
        }

        // –í—ã–±–æ—Ä —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–∞
        document.querySelectorAll('.object-type-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.object-type-btn').forEach(b => b.classList.remove('ring-2', 'ring-blue-500'));
                btn.classList.add('ring-2', 'ring-blue-500');
                selectedObjectType = btn.dataset.type;
            });
        });

        // –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ Canvas
        function createCanvasObject(type, content, x = 100, y = 100) {
            const colors = {
                problem: '#fef2f2',
                insight: '#eff6ff',
                persona: '#f0fdf4',
                solution: '#faf5ff',
                milestone: '#fffbeb',
                note: '#f9fafb'
            };

            const icons = {
                problem: '‚ö†Ô∏è',
                insight: 'üí°',
                persona: 'üë§',
                solution: 'üîß',
                milestone: 'üèÅ',
                note: 'üìù'
            };

            const rect = new fabric.Rect({
                left: x,
                top: y,
                width: 200,
                height: 120,
                fill: colors[type] || colors.note,
                stroke: '#d1d5db',
                strokeWidth: 2,
                rx: 8,
                ry: 8
            });

            const text = new fabric.Text(`${icons[type]} ${content}`, {
                left: x + 10,
                top: y + 10,
                fontSize: 14,
                fill: '#374151',
                width: 180,
                textAlign: 'left'
            });

            const group = new fabric.Group([rect, text], {
                left: x,
                top: y
            });

            canvas.add(group);
            canvas.renderAll();
        }

        // –ß–∞—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
        document.getElementById('sendBtn').addEventListener('click', sendMessage);
        document.getElementById('chatInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            addMessageToChat('user', message);
            input.value = '';

            // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ AI
            setTimeout(() => {
                const aiResponse = generateAIResponse(message);
                addMessageToChat('ai', aiResponse);
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ Canvas
                if (shouldCreateCanvasObject(message)) {
                    createCanvasObject(selectedObjectType, extractKeyContent(message));
                }
            }, 1000);
        }

        function addMessageToChat(sender, message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            
            if (sender === 'user') {
                messageDiv.className = 'bg-gray-100 p-3 rounded-lg ml-8';
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-2">
                        <i class="fas fa-user text-gray-600 mt-1"></i>
                        <p class="text-sm text-gray-700">${message}</p>
                    </div>
                `;
            } else {
                messageDiv.className = 'bg-blue-50 p-3 rounded-lg';
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-2">
                        <i class="fas fa-robot text-blue-600 mt-1"></i>
                        <div>
                            <p class="text-sm text-gray-700">${message}</p>
                        </div>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function generateAIResponse(userMessage) {
            const responses = [
                "–û—Ç–ª–∏—á–Ω–∞—è –∏–¥–µ—è! –î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –µ—ë –ø–æ–¥—Ä–æ–±–Ω–µ–µ. –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–Ω–∞ —Ä–µ—à–∞–µ—Ç?",
                "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –±–æ–ª—å—à–µ –æ –≤–∞—à–µ–π —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏.",
                "–•–æ—Ä–æ—à–∞—è –º—ã—Å–ª—å! –î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è —ç—Ç–æ–π –∏–¥–µ–∏.",
                "–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –Ω–∞ —Ä—ã–Ω–∫–µ.",
                "–ü–æ–Ω—è—Ç–Ω–æ! –î–∞–≤–∞–π—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–∏–º –∫–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞.",
                "–•–æ—Ä–æ—à–æ! –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –ø–æ–¥—É–º–∞—Ç—å –æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.",
                "–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –ø–ª–∞–Ω –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞.",
                "–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! –í–∞—à–∞ –∏–¥–µ—è –≥–æ—Ç–æ–≤–∞ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏!"
            ];
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function shouldCreateCanvasObject(message) {
            const keywords = ['–ø—Ä–æ–±–ª–µ–º–∞', '–∏–¥–µ—è', '—Ä–µ—à–µ–Ω–∏–µ', '–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å', '–∞–Ω–∞–ª–∏–∑', '–∏–Ω—Å–∞–π—Ç'];
            return keywords.some(keyword => message.toLowerCase().includes(keyword));
        }

        function extractKeyContent(message) {
            // –ü—Ä–æ—Å—Ç–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
            return message.length > 50 ? message.substring(0, 50) + '...' : message;
        }

        // –ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞
        document.getElementById('analyzeMarketBtn').addEventListener('click', () => {
            showLoading();
            setTimeout(() => {
                hideLoading();
                addMessageToChat('ai', '–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω! –°–æ–∑–¥–∞—é –æ–±—ä–µ–∫—Ç—ã –Ω–∞ Canvas...');
                createCanvasObject('insight', '–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞: –≤—ã—Å–æ–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª');
                createCanvasObject('problem', '–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π');
            }, 2000);
        });

        // Twitter –∞–Ω–∞–ª–∏–∑
        document.getElementById('twitterAnalysis').addEventListener('click', () => {
            showLoading();
            setTimeout(() => {
                hideLoading();
                addMessageToChat('ai', 'Twitter –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω! –ù–∞–π–¥–µ–Ω–æ 15 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ç–≤–∏—Ç–æ–≤.');
                createCanvasObject('insight', 'Twitter –∏–Ω—Å–∞–π—Ç—ã: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∂–∞–ª—É—é—Ç—Å—è –Ω–∞...');
            }, 1500);
        });

        // –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Canvas
        document.getElementById('selectTool').addEventListener('click', () => {
            canvas.isDrawingMode = false;
            canvas.selection = true;
        });

        document.getElementById('panTool').addEventListener('click', () => {
            canvas.isDrawingMode = false;
            canvas.selection = false;
        });

        document.getElementById('zoomIn').addEventListener('click', () => {
            canvas.setZoom(canvas.getZoom() * 1.1);
        });

        document.getElementById('zoomOut').addEventListener('click', () => {
            canvas.setZoom(canvas.getZoom() * 0.9);
        });

        document.getElementById('clearCanvas').addEventListener('click', () => {
            if (confirm('–û—á–∏—Å—Ç–∏—Ç—å Canvas?')) {
                canvas.clear();
            }
        });

        // –≠–∫—Å–ø–æ—Ä—Ç
        document.getElementById('exportBtn').addEventListener('click', () => {
            const dataURL = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = 'ai-cofounder-canvas.png';
            link.href = dataURL;
            link.click();
        });

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        document.getElementById('saveBtn').addEventListener('click', () => {
            const canvasData = JSON.stringify(canvas.toJSON());
            localStorage.setItem('ai-cofounder-canvas', canvasData);
            alert('Canvas —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ Canvas
        function loadCanvas() {
            const saved = localStorage.getItem('ai-cofounder-canvas');
            if (saved) {
                canvas.loadFromJSON(saved, () => {
                    canvas.renderAll();
                });
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            loadCanvas();
            updatePhaseInfo();
            
            // –°–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
            createCanvasObject('problem', '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç –≤–∞—à–∞ –∏–¥–µ—è', 50, 50);
            createCanvasObject('insight', '–î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Å–∞–π—Ç—ã –∏–∑ –∞–Ω–∞–ª–∏–∑–∞ —Ä—ã–Ω–∫–∞', 300, 50);
            createCanvasObject('persona', '–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é', 50, 200);
            createCanvasObject('solution', '–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ –∏ MVP', 300, 200);
        });

        function showLoading() {
            document.getElementById('loadingOverlay').classList.remove('hidden');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.add('hidden');
        }
    </script>
</body>
</html>
